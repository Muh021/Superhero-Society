<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agents</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <nav id="navbar">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="heroes-villains.html">Heroes/Villains</a></li>
          <li><a href="missions.html">Missions</a></li>
          <li><a href="superpowers.html">Superpowers</a></li>
          <li><a href="hero-superpower.html">Hero Superpowers</a></li>
          <li><a href="villain-superpower.html">Villain Superpowers</a></li>
          <li><a href="agents.html">Agents</a></li>
        </ul>
      </nav>
      <button id="loginButton">Login</button>
    </header>
    <div id="form-container">
      <h2>Add an Agent</h2>
      <form id="agentForm" action="process_agents.php" method="post">
        <div id="formFields">
          <label for="AgentID">AgentID:</label>
          <input type="number" id="AgentID" name="AgentID" required />
          <label for="Name">Name:</label>
          <input type="text" id="Name" name="Name" required />
          <label for="DOB">DOB:</label>
          <input type="date" id="DOB" name="DOB" />
          <label for="Salary">Salary:</label>
          <input type="number" id="Salary" name="Salary" required />
          <label for="Experience">Experience:</label>
          <input type="text" id="Experience" name="Experience" />
        </div>
        <input type="submit" value="Add Agent" />
      </form>
      <button onclick="clearForm()">Add Another Agent</button>
    </div>
    <div id="output"></div>
    <div id="update-form-container">
      <h2>Update an Agent</h2>
      <form id="updateAgentForm" action="process_agents.php" method="post">
        <label for="UpdateAgentID">AgentID (to update):</label>
        <input type="text" id="UpdateAgentID" name="UpdateAgentID" required class="long-textbox" />

        <!-- Fields for the agent information that you want to update -->
        <label for="UpdateName">Name:</label>
        <input type="text" id="UpdateName" name="UpdateName" />

        <label for="UpdateDOB">DOB:</label>
        <input type="date" id="UpdateDOB" name="UpdateDOB" />

        <label for="UpdateSalary">Salary:</label>
        <input type="number" id="UpdateSalary" name="UpdateSalary" />

        <label for="UpdateExperience">Experience:</label>
        <input type="text" id="UpdateExperience" name="UpdateExperience" />

        <input type="submit" value="Update Agent" />
      </form>
    </div>
    <script>
      document
        .getElementById("loginButton")
        .addEventListener("click", function () {
          alert("Login functionality not implemented yet.");
        });

      // This function will display the agent's details and allow the form to submit normally.
      function displayAgent() {
        const formData = new FormData(document.getElementById("agentForm"));
        let outputHtml = `<h3>Agent Details</h3>`;
        for (let [key, value] of formData.entries()) {
          let label = key;
          if (label !== "Name") {
            outputHtml += `<p>${label}: ${value}</p>`;
          } else {
            outputHtml = `<h3>${value}</h3>` + outputHtml;
          }
        }
        const outputDiv = document.createElement("div");
        outputDiv.innerHTML = outputHtml;
        document.getElementById("output").appendChild(outputDiv);
      }

      // The form's 'submit' event is now allowed to continue after 'displayAgent' is called.
      document
        .getElementById("agentForm")
        .addEventListener("submit", function () {
          displayAgent();
        });

      // The 'clearForm' function now includes clearing the output div.
      function clearForm() {
        document.getElementById("agentForm").reset();
        document.getElementById("output").innerHTML = ""; // Clear the output
      }
    </script>
  </body>
</html>